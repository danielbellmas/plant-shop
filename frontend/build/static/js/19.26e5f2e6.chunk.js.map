{"version":3,"sources":["styles/checkout-style.js","components/CheckoutForm/FormInput.js","components/CheckoutForm/AddressForm.js","components/CheckoutForm/Overview.js","components/CheckoutForm/PaymentForm.js","components/CheckoutForm/Checkout.js"],"names":["makeStyles","theme","appBar","position","layout","marginTop","width","marginLeft","spacing","marginRight","breakpoints","up","paper","marginBottom","padding","down","stepper","buttons","display","justifyContent","button","divider","margin","spinner","alignItems","FormInput","name","label","required","control","useFormContext","Grid","item","xs","sm","as","TextField","fullWidth","require","render","field","AddressForm","next","setShippingData","methods","useForm","Typography","variant","gutterBottom","onSubmit","handleSubmit","data","handleDataSubmit","container","autoComplete","style","Button","component","Link","to","type","color","Overview","cartItems","subtotal","List","disablePadding","map","ListItem","ListItemText","primary","secondary","quantity","price","fontWeight","stripePromise","loadStripe","process","PaymentForm","backStep","nextStep","useContext","CartContext","setCartItems","CartSubtotalContext","event","elements","stripe","a","preventDefault","cardElement","getElement","CardElement","createPaymentMethod","card","error","paymentMethod","console","log","Divider","e","onClick","disabled","steps","Checkout","classes","useStyles","useState","activeStep","setActiveStep","shippingData","Confirmation","firstName","lastName","className","href","Form","prevActiveStep","CssBaseline","Paper","align","Stepper","step","Step","StepLabel","length"],"mappings":"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","file":"static/js/19.26e5f2e6.chunk.js","sourcesContent":["import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport default makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  layout: {\r\n    marginTop: \"5%\",\r\n    width: \"auto\",\r\n    marginLeft: theme.spacing(2),\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\r\n      width: 600,\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(3),\r\n    padding: theme.spacing(2),\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      width: \"100%\",\r\n      marginTop: 60,\r\n    },\r\n    [theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\r\n      marginTop: theme.spacing(6),\r\n      marginBottom: theme.spacing(6),\r\n      padding: theme.spacing(3),\r\n    },\r\n  },\r\n  stepper: {\r\n    padding: theme.spacing(3, 0, 5),\r\n  },\r\n  buttons: {\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(3),\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  divider: {\r\n    margin: \"20px 0\",\r\n  },\r\n  spinner: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n","import React from \"react\";\r\nimport { TextField, Grid } from \"@material-ui/core\";\r\nimport { useFormContext, Controller } from \"react-hook-form\";\r\nconst FormInput = ({ name, label, required }) => {\r\n  const { control } = useFormContext();\r\n\r\n  return (\r\n    <Grid item xs={12} sm={6}>\r\n      <Controller\r\n        as={TextField}\r\n        control={control}\r\n        fullWidth\r\n        name={name}\r\n        require={required}\r\n        label={label}\r\n        render={({ field }) => (\r\n          <TextField {...field} fullWidth label={label} required name={name} />\r\n        )}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default FormInput;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useForm, FormProvider } from \"react-hook-form\";\r\nimport { Button, Grid, Typography } from \"@material-ui/core\";\r\nimport FormInput from \"./FormInput\";\r\n\r\nconst AddressForm = ({ next, setShippingData }) => {\r\n  const methods = useForm();\r\n  const handleDataSubmit = (data) => {\r\n    setShippingData(data);\r\n    next(data);\r\n  };\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Shipping Address\r\n      </Typography>\r\n      <FormProvider {...methods}>\r\n        <form onSubmit={methods.handleSubmit((data) => handleDataSubmit(data))}>\r\n          <Grid container spacing={3}>\r\n            <FormInput\r\n              required\r\n              name=\"firstName\"\r\n              label=\"First name\"\r\n              autoComplete=\"given-name\"\r\n            />\r\n            <FormInput required name=\"lastName\" label=\"Last name\" />\r\n            <FormInput required name=\"address\" label=\"Address\" />\r\n            <FormInput required name=\"email\" label=\"Email\" />\r\n            <FormInput required name=\"city\" label=\"City\" />\r\n            <FormInput required name=\"ZIP\" label=\"ZIP / Postal code\" />\r\n          </Grid>\r\n          <br />\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Button component={Link} to=\"/cart\" variant=\"outlined\">\r\n              Back To Cart\r\n            </Button>\r\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n              Next\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </FormProvider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddressForm;\r\n","import React from \"react\";\r\nimport { Typography, List, ListItem, ListItemText } from \"@material-ui/core\";\r\nconst Overview = ({ cartItems, subtotal }) => {\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Order Summery\r\n      </Typography>\r\n      <List disablePadding>\r\n        {cartItems.map((item) => (\r\n          <ListItem style={{ padding: \"10px 0\" }} key={item.name}>\r\n            <ListItemText\r\n              primary={item.name}\r\n              secondary={`Quantity: ${item.quantity}`}\r\n            />\r\n            <Typography variant=\"body2\">{item.price}</Typography>\r\n          </ListItem>\r\n        ))}\r\n        <ListItem style={{ padding: \"10px 0\" }}>\r\n          <ListItemText primary=\"Total\" />\r\n          <Typography variant=\"subtitle1\" style={{ fontWeight: 700 }}>\r\n            ${subtotal}\r\n          </Typography>\r\n        </ListItem>\r\n      </List>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Overview;\r\n","import React, { useContext } from \"react\";\r\nimport { Typography, Button, Divider } from \"@material-ui/core\";\r\nimport {\r\n  Elements,\r\n  CardElement,\r\n  ElementsConsumer,\r\n} from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport Overview from \"./Overview\";\r\nimport { CartContext, CartSubtotalContext } from \"../../PlantContext\";\r\n\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);\r\n\r\nconst PaymentForm = ({ backStep, nextStep }) => {\r\n  const [cartItems, setCartItems] = useContext(CartContext);\r\n  const [subtotal] = useContext(CartSubtotalContext);\r\n\r\n  const handleSubmit = async (event, elements, stripe) => {\r\n    event.preventDefault();\r\n    if (!stripe || !elements) return;\r\n    const cardElement = elements.getElement(CardElement);\r\n\r\n    const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n      type: \"card\",\r\n      card: cardElement,\r\n    });\r\n\r\n    if (error) console.log(error);\r\n    else {\r\n      // const orderData = {\r\n      //   customer: {\r\n      //     firstname: shippingData.firstName,\r\n      //     lastname: shippingData.lastName,\r\n      //     email: shippingData.email,\r\n      //   },\r\n      //   payment: {\r\n      //     gateway: \"stripe\",\r\n      //     stripe: {\r\n      //       payment_method_id: paymentMethod.id,\r\n      //     },\r\n      //   },\r\n      // };\r\n      nextStep();\r\n      setCartItems({}); //reset cart\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Overview cartItems={cartItems} subtotal={subtotal} />\r\n      <Divider />\r\n      <Typography variant=\"h6\" gutterBottom style={{ margin: \"20px 0\" }}>\r\n        Payment method\r\n      </Typography>\r\n      <Elements stripe={stripePromise}>\r\n        <ElementsConsumer>\r\n          {({ elements, stripe }) => (\r\n            <form onSubmit={(e) => handleSubmit(e, elements, stripe)}>\r\n              <CardElement />\r\n              <br />\r\n              <br />\r\n              <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n                <Button onClick={backStep} variant=\"outlined\">\r\n                  Back\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                  disabled={!stripe}\r\n                  color=\"primary\"\r\n                >\r\n                  Pay ${subtotal}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </ElementsConsumer>\r\n      </Elements>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PaymentForm;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Paper,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Typography,\r\n  CircularProgress,\r\n  Divider,\r\n  Button,\r\n  CssBaseline,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../../styles/checkout-style\";\r\nimport AddressForm from \"./AddressForm\";\r\nimport PaymentForm from \"./PaymentForm\";\r\nimport { Link } from \"react-router-dom\";\r\nconst steps = [\"Shipping address\", \"Payment details\"];\r\n\r\nconst Checkout = () => {\r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [shippingData, setShippingData] = useState({});\r\n  console.log(shippingData);\r\n  let Confirmation = () => (\r\n    <>\r\n      <div>\r\n        <Typography variant=\"h6\">\r\n          Thank you for your purchase! {shippingData.firstName}{\" \"}\r\n          {shippingData.lastName}\r\n        </Typography>\r\n        <Divider className={classes.divider} />\r\n        <Typography variant=\"subtitle2\">\r\n          Order ref: {shippingData.lastName}1Ba34\r\n        </Typography>\r\n      </div>\r\n      <br />\r\n      <Button href=\"/\" variant=\"outlined\" type=\"button\">\r\n        Back To Home Page\r\n      </Button>\r\n    </>\r\n  );\r\n\r\n  const Form = () =>\r\n    activeStep === 0 ? (\r\n      <AddressForm next={next} setShippingData={setShippingData} />\r\n    ) : (\r\n      <PaymentForm\r\n        shippingData={shippingData}\r\n        backStep={backStep}\r\n        nextStep={nextStep}\r\n      />\r\n    );\r\n\r\n  const next = (data) => {\r\n    setShippingData(data);\r\n    nextStep();\r\n  };\r\n  const nextStep = () => setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  const backStep = () => setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <main className={classes.layout}>\r\n        <Paper className={classes.paper}>\r\n          <Typography variant=\"h4\" align=\"center\">\r\n            Checkout\r\n          </Typography>\r\n          <Stepper activeStep={activeStep} className={classes.stepper}>\r\n            {steps.map((step) => (\r\n              <Step key={step}>\r\n                <StepLabel>{step}</StepLabel>\r\n              </Step>\r\n            ))}\r\n          </Stepper>\r\n          {activeStep === steps.length ? <Confirmation /> : <Form />}\r\n        </Paper>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"sourceRoot":""}